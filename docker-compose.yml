services:
  openclaw:
    build: .
    container_name: openclaw
    restart: unless-stopped
    ports:
      - "5901:5901"   # VNC
      - "6080:6080"   # noVNC (browser access)
      - "18790:18790" # OpenClaw Gateway
    volumes:
      # 全データを永続化
      - openclaw-data:/home/openclaw/.openclaw
    env_file:
      - .env
    environment:
      - DISPLAY=:1
      - NODE_ENV=production
    shm_size: '2gb'  # Chromium needs shared memory

volumes:
  openclaw-data:
    driver: local
